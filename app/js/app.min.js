app.filter("startFrom",function(){return function(a,b){if(void 0!=a)return a.slice(b)}}),app.factory("CurrentUser",function(){var a=function(a){this.user=a};return{setUser:a}}),app.factory("ImageService",function(){var a=function(a,b,c,d){if(checkSession(!0)){var e=getStoredValue("_id"),f=getStoredValue("sessionId"),g="/php/image.php";doAjaxCall(g,{user:e,sessionId:f,"function":"insert",filename:a,data:b,type:c},d)}},b=function(a,b,c){if(checkSession(!0)){var d=getStoredValue("_id"),e=getStoredValue("sessionId"),f="/php/image.php";doAjaxCall(f,{user:d,sessionId:e,"function":"remove",filename:a,type:b},c)}},c=function(a,b,c,d,e){if(a.files[0]){var f=a.files[0],g=new FileReader;g.onloadend=function(){var a=new Image;a.src=g.result,a.onload=function(){var b=c,g=d,h=a.width,i=a.height;h>i?h>b&&(i*=b/h,h=b):i>g&&(h*=g/i,i=g);var j=document.createElement("canvas");j.width=h,j.height=i;var k=j.getContext("2d");k.drawImage(this,0,0,h,i);var l=j.toDataURL(f.type),m=l.substr(l.indexOf("base64,")+7),n=atob(m),o=n.length;e(l,o)}},g.readAsDataURL(f)}};return{addImage:a,removeImage:b,resizeImage:c}}),app.factory("DataFormatFactory",function(){var a=function(a){if(void 0!=a)return $.parseHTML(a)[0]},b=function(a,b){return c(d(a),b)},c=function(a,b){var c=a.getFullYear(),d=a.getMonth()+1,f=a.getDate(),g=a.getHours(),h=a.getMinutes();return b?c+"."+e(d)+"."+e(f):c+"."+e(d)+"."+e(f)+" "+e(g)+":"+e(h)},d=function(a,b){var c=new Date(1970,0,1);return c.setSeconds(a),void 0!=b&&c.setHours(c.getHours()+b),c},e=function(a){return(a<10?"0":"")+a},f=function(a,b){var e=a[b.value],f=b.format,g="";if(null==e)g="NULL";else if(void 0==e)g="undefined";else switch(f){case"date":g=c(d(e.sec,2));break;default:g=e}return g},g=function(a){if(void 0!=texts){var b=texts[a];return void 0==b?"'"+a+"' "+texts.notFound:b}return"Texts not loaded"};return{parseHtml:a,dateTimeToUiString:c,showCellData:f,getString:g,zeroFill:e,secondsToUiString:b,secondsToDateTime:d}}),app.controller("AppCtrl",["$scope","$mdBottomSheet","$mdSidenav","$mdDialog","DataFormatFactory","$interval","$mdToast","CurrentUser",function(a,b,c,d,e,f,g,h){function i(){var b="";b=sessionStorage.getItem("rememberMe"),""!=b&&void 0!=b&&null!=b||(b=localStorage.getItem("rememberMe")),""!=b&&void 0!=b&&null!=b||(b=!0),a.RememberMe=b,RememberMe=b,b="",b=sessionStorage.getItem("crossTab"),""!=b&&void 0!=b&&null!=b||(b=localStorage.getItem("crossTab")),""!=b&&void 0!=b&&null!=b||(b=!0),a.CrossTab=b,CrossTab=b}a.dataFormatFactory=e,a.user={},a.RememberMe=!0,a.CrossTab=!0,a.getTabFromHash=function(){var a=location.hash;return a.indexOf("#")>=0?a.indexOf("?")>=0?a.substring(a.indexOf("#")+1,a.indexOf("?")):a.substring(a.indexOf("#")+1):"startTab"},a.tab=a.getTabFromHash(),a.alerts=[],a.showSearch=!1,a.PrimaryColor=""==getStoredValue("PrimaryColor")?ThemeColors[5]:getStoredValue("PrimaryColor"),a.Colors=ThemeColors,a.AccentColor=""==getStoredValue("AccentColor")?ThemeColors[4]:getStoredValue("AccentColor"),a.DarkTheme="true"==getStoredValue("DarkTheme"),a.selectedLanguage=getStoredValue("pageLanguage"),a.Languages=Languages,a.News={},a.MenuTypes={},a.menu=[],a.applyMenu=function(){for(var b in a.menu){var c=a.menu[b];if(c.signInRequired)switch(c.type){case a.MenuTypes.User:c.visible=void 0!=a.user.email;break;case a.MenuTypes.Admin:c.visible="admin"==a.user.role;break;case a.MenuTypes.Default:c.visible=!0}}},a.changeDarkTheme=function(b){a.DarkTheme=b,storeValue("DarkTheme",b),a.saveTheme()},a.changeTheme=function(b,c){b===c?showError("Use different colors."):(a.PrimaryColor=b,a.AccentColor=c,storeValue("PrimaryColor",b),storeValue("AccentColor",c)),a.saveTheme()},a.saveTheme=function(){var b={};b.theme={},b.theme.primaryColor=a.PrimaryColor,b.theme.accentColor=a.AccentColor,b.theme.darkTheme=a.DarkTheme,a.saveSettings(b)},a.removeInvalidImages=function(){if(checkSession(!1)){var a=getStoredValue("_id"),b=getStoredValue("sessionId"),c="/php/image.php";doAjaxCall(c,{user:a,sessionId:b,"function":"removeInvalid"},function(a){1!=a.CRUDstatus.Success?showError(a.CRUDstatus.Error):showToast("Success")})}},a.restartServer=function(a){if(checkSession(!1)&&""!=a){a=$.sha256(a);var b="/php/restartServer.php";doAjaxCall(b,{secret:a},function(a){showToast(a["return"])})}},a.saveSettings=function(a){if(checkSession(!1)){var b=getStoredValue("_id"),c=getStoredValue("sessionId"),d="/php/user.php";b.length>0&&c.length>0&&doAjaxCall(d,{user:b,sessionId:c,"function":"saveSettings",settings:a},function(a){1!=a.CRUDstatus.Success?showError(a.CRUDstatus.Error):showToast("Success")})}},a.changeLanguage=function(b,c){checkSession(!1)&&c&&a.saveSettings({language:b}),storeValue("pageLanguage",b),document.cookie="pageLanguage="+b,a.getTexts(b)},a.addAlert=function(b){a.alerts.push(b)},a.showSimpleToast=function(a){g.show(g.simple().textContent(a).position("top right").hideDelay(3e3))},a.closeAlert=function(b){void 0==b?a.alerts=[]:a.alerts.splice(b,1)},a.loadMetaTags=function(){for(var a in metagTags){var b=metagTags[a],c=$("<meta />");
c.attr("name",b.name),c.attr("content",b.content),$("head").append(c)}},a.loadInitData=function(){var b="/php/getInitData.php?";doAjaxCall(b,{},function(b){ForceScriptReload=Boolean(b.ForceScriptReload),storeValue("ForceScriptReload",ForceScriptReload),MaxFileSize=parseInt(b.MaxFileSize),storeValue("MaxFileSize",MaxFileSize),a.$apply(function(){a.menu=b.menu,a.MenuTypes=b.menuTypes,a.applyMenu()})})},a.login=function(b,c){var d=getStoredValue("email"),e=getStoredValue("_id");if(d.length>0||userId.length>0){b?(RememberMe=a.RememberMe,CrossTab=a.CrossTab,storeValue("rememberMe",a.RememberMe),storeValue("crossTab",a.CrossTab)):(a.RememberMe=getStoredValue("rememberMe"),a.CrossTab=getStoredValue("crossTab"));var f={userEmail:d,user:e,manual:b,RememberMe:a.RememberMe,"function":"login"},g=getClientInfos();null!=g&&(f.userData=JSON.stringify(g)),void 0!=c?f.pwd=c:f.sessionId=getStoredValue("sessionId");var i="/php/user.php";doAjaxCall(i,f,function(c){if(1!=c.CRUDstatus.Success)showError(c.CRUDstatus.Error),removeValue();else{for(var d in c.News){var e=c.News[d];a.News[d]=e}removeOldMsgs();var f=void 0;1==a.RememberMe&&(f=7);for(var g in c.user)storeValue(g,c.user[g],f);storeValue("sessionId",c.sessionId.$id,f),storeValue("_id",c.user._id.$id,f),$("#username").val(""),$("#password").val(""),a.selectedTab(a.tab),b&&a.selectedTab("startTab"),a.$apply(function(){void 0!=c.user.settings&&(void 0!=c.user.settings.theme&&(a.PrimaryColor=c.user.settings.theme.primaryColor,a.AccentColor=c.user.settings.theme.accentColor,a.DarkTheme="true"==c.user.settings.theme.darkTheme),void 0!=c.user.settings.language&&a.changeLanguage(c.user.settings.language)),h.setUser(c.user),a.user=h.user,a.applyMenu()})}})}else showError("Please fill all necessary fields")},a.startloading=function(){$(document).ajaxStart(function(){$(".loading").show()}).ajaxStop(function(){$(".loading").hide()}),i(),checkSession(!1)?a.login(!1):a.selectedTab(a.tab)};var j=1;if(a.loadscript=function(b){return function(b,c,d){localStorage.setItem(this.scriptname,b);var e=$("<script></script>");e.text(b),e.attr("type","text/javascript"),e.attr("src",this.src),$("head").append(e),j==Object.keys(scripts).length&&a.startloading(),j++}},a.loadScripts=function(){a.loadInitData();for(var b in scripts){var c=scripts[b],d=c.name,e=localStorage.getItem(d);if(void 0==e||"undefined"==e||ForceScriptReload){var f=c.url;$.ajax({url:f,dataType:"script",success:a.loadscript(),context:{scriptname:d,index:b,src:f}})}else{var g=$("<script></script>");g.text(e),g.attr("type","text/javascript"),g.attr("src",c.url),$("head").append(g),b==Object.keys(scripts).length&&a.startloading()}}},a.load=function(){a.loadInitData()},a.getTexts=function(a){$.getJSON("../lang/"+a+".json",{},function(a){texts=a,storeValue("texts",JSON.stringify(texts))}).error(function(a){showError("something went wrong")})},ForceScriptReload="true"==getStoredValue("ForceScriptReload"),""==a.selectedLanguage||""==getStoredValue("texts")||1==ForceScriptReload)switch(navigator.language){case"de":case"de-DE":a.changeLanguage("de");break;case"en":case"en-US":case"en-UK":a.changeLanguage("en");break;default:a.changeLanguage("de")}else texts=JSON.parse(getStoredValue("texts"));a.toggleSidenav=function(a){c(a).toggle()},a.selectedTab=function(b){switch(c("left").close(),f.cancel(cpuIntervalId),a.tab=b,$(".navbar-collapse").collapse("hide"),d.cancel(),a.tab){case"mediaTab":var e={};e.id=a.getParamFromUrl("id"),e.type=a.getParamFromUrl("type"),angular.element('[ng-controller="MediaCtrl"]').scope().init(e);break;case"workoutsTab":getExcercises(!0,void 0,"musclegroup","1"),angular.element('[ng-controller="WorkoutController"]').scope().getWorkoutsAngular();break;case"bugTab":"admin"==a.user.role?(angular.element('[ng-controller="BugCtrl"]').scope().showBugs=!0,angular.element('[ng-controller="BugCtrl"]').scope().getBugs()):angular.element('[ng-controller="BugCtrl"]').scope().showBugs=!1;break;case"excercisesTab":angular.element('[ng-controller="ExcerciseController"]').scope().getExcercisesAngular();break;case"userInfoTab":angular.element('[ng-controller="UserCtrl"]').scope().getUserInfo();break;case"shishaTab":var e={};e.id=a.getParamFromUrl("id"),e.type=a.getParamFromUrl("type");break;case"signupTab":break;case"imprintTab":break;case"privacyTab":break;case"loginTab":break;case"settingsTab":break;case"versionTab":"admin"==a.user.role?angular.element('[ng-controller="VersionCtrl"]').scope().showAdd=!0:angular.element('[ng-controller="VersionCtrl"]').scope().showAdd=!1,angular.element('[ng-controller="VersionCtrl"]').scope().getVersions();break;case"logoutTab":a.logout();break;case"statisticTab":angular.element('[ng-controller="StatsCtrl"]').scope().getStatistics();break;case"usersTab":angular.element('[ng-controller="UsersCtrl"]').scope().getUsers();break;case"dashboardTab":angular.element('[ng-controller="DashboardCtrl"]').scope().getSrvInfo();break;case"startTab":default:checkSession(!1)?(a.tab="startTab",angular.element('[ng-controller="StartPageCtrl"]').scope().getStartPageContent()):a.tab="mainTab";
}},a.getParamFromUrl=function(a){var b=window.location.href,c=new RegExp(a+"=([^&]+)"),d=c.exec(b),e=!!d&&d[1];return e},a.loginForm=function(){var b=$("#username").val().trim(),c=$("#password").val();b.length>0&&c.length>0?(storeValue("email",b),c=$.sha256(b+c),a.login(!0,c)):showError("Please fill all necessary fields")},a.signup=function(){var a=$("#usernameSignUp").val().trim(),b=$.sha256(a+$("#passwordSignUp").val().trim()),c=$.sha256(a+$("#passwordSignUp2").val().trim());if(b==c){var d="/php/user.php",e=(getStoredValue("_id"),{});e["function"]="signup",e.email=a,e.pwd=b,e.firstname=$("#firstnameSignUp").val().trim(),e.lastname=$("#lastnameSignUp").val().trim(),e.city=$("#citySignUp").val().trim(),e.country=$("#countrySignUp").val().trim(),e.street=$("#streetSignUp").val().trim();var f=getClientInfos();null!=f&&(e.userData=JSON.stringify(f)),doAjaxCall(d,e,function(a){1!=a.CRUDstatus.Success?(showError(a.CRUDstatus.Error),removeValue("username"),removeValue("password"),removeValue("session")):(showSuccess(a.status),$("#passwordSignUp").val(""),$("#passwordSignUp2").val(""),$("#usernameSignUp").val(""),$("#firstnameSignUp").val(""),$("#lastnameSignUp").val(""),$("#countrySignUp").val(""),$("#citySignUp").val(""),$("#streetSignUp").val(""))})}else showError("Passwords are not equal")},a.logout=function(){var b=getStoredValue("_id"),c=getStoredValue("sessionId");if(b.length>0&&c.length>0){var d="/php/user.php",b=getStoredValue("_id"),c=getStoredValue("sessionId"),e={user:b,sessionId:c,"function":"logout"},f=getClientInfos();null!=f&&(e.userData=JSON.stringify(f)),doAjaxCall(d,e,function(b){1!=b.CRUDstatus.Success?showError(b.CRUDstatus.Error):a.$apply(function(){a.RememberMe=!0,a.CrossTab=!0,h.user={},a.user={},a.News={},a.applyMenu(),removeValue(),a.selectedTab("startTab")})})}},a.isSelected=function(a){return this.tab===a},a.loadMetaTags(),a.startloading(),a.loadInitData(),$(document).on("click","a",function(a){a.preventDefault();var b=$(this),c=b.attr("href"),d=b.attr("title");""!=d&&void 0!=d&&(history.pushState({url:c,title:d},d,c),document.title=d)}),$(window).on("popstate",function(b){var c=b.originalEvent.state;if(null!==c){document.title=c.title;var d=c.url.replace("#","");d.indexOf("?")>-1&&(d=d.substring(0,d.indexOf("?"))),a.selectedTab(d)}else document.title="Uups"})}]),app.controller("FabSpeedDialCtrl",["$scope","$timeout",function(a,b){a.location=window.location.origin,a.fabSpeedDial={hidden:!1,isOpen:!1,hover:!1,items:[{name:"Mail",icon:"mdi mdi-email",direction:"bottom",url:"mailto:?Subject="+a.location+"&amp;Body=I%20saw%20this%20and%20thought%20of%20you!%20 "+a.location},{name:"Facebook",icon:"mdi mdi-facebook-box",direction:"top",url:"http://www.facebook.com/sharer.php?u="+a.location},{name:"Google Plus",icon:"mdi mdi-google-plus",direction:"bottom",url:"https://plus.google.com/share?url="+a.location}]},a.$watch("fabSpeedDial.isOpen",function(c){c?b(function(){a.fabSpeedDial.tooltipVisible=a.fabSpeedDial.isOpen},600):a.fabSpeedDial.tooltipVisible=a.fabSpeedDial.isOpen})}]),app.directive("userAvatar",function(){return{replace:!0,template:'<svg class="user-avatar" viewBox="0 0 128 128" height="64" width="64" pointer-events="none" display="block" > <path fill="#FF8A80" d="M0 0h128v128H0z"/> <path fill="#FFE0B2" d="M36.3 94.8c6.4 7.3 16.2 12.1 27.3 12.4 10.7-.3 20.3-4.7 26.7-11.6l.2.1c-17-13.3-12.9-23.4-8.5-28.6 1.3-1.2 2.8-2.5 4.4-3.9l13.1-11c1.5-1.2 2.6-3 2.9-5.1.6-4.4-2.5-8.4-6.9-9.1-1.5-.2-3 0-4.3.6-.3-1.3-.4-2.7-1.6-3.5-1.4-.9-2.8-1.7-4.2-2.5-7.1-3.9-14.9-6.6-23-7.9-5.4-.9-11-1.2-16.1.7-3.3 1.2-6.1 3.2-8.7 5.6-1.3 1.2-2.5 2.4-3.7 3.7l-1.8 1.9c-.3.3-.5.6-.8.8-.1.1-.2 0-.4.2.1.2.1.5.1.6-1-.3-2.1-.4-3.2-.2-4.4.6-7.5 4.7-6.9 9.1.3 2.1 1.3 3.8 2.8 5.1l11 9.3c1.8 1.5 3.3 3.8 4.6 5.7 1.5 2.3 2.8 4.9 3.5 7.6 1.7 6.8-.8 13.4-5.4 18.4-.5.6-1.1 1-1.4 1.7-.2.6-.4 1.3-.6 2-.4 1.5-.5 3.1-.3 4.6.4 3.1 1.8 6.1 4.1 8.2 3.3 3 8 4 12.4 4.5 5.2.6 10.5.7 15.7.2 4.5-.4 9.1-1.2 13-3.4 5.6-3.1 9.6-8.9 10.5-15.2M76.4 46c.9 0 1.6.7 1.6 1.6 0 .9-.7 1.6-1.6 1.6-.9 0-1.6-.7-1.6-1.6-.1-.9.7-1.6 1.6-1.6zm-25.7 0c.9 0 1.6.7 1.6 1.6 0 .9-.7 1.6-1.6 1.6-.9 0-1.6-.7-1.6-1.6-.1-.9.7-1.6 1.6-1.6z"/> <path fill="#E0F7FA" d="M105.3 106.1c-.9-1.3-1.3-1.9-1.3-1.9l-.2-.3c-.6-.9-1.2-1.7-1.9-2.4-3.2-3.5-7.3-5.4-11.4-5.7 0 0 .1 0 .1.1l-.2-.1c-6.4 6.9-16 11.3-26.7 11.6-11.2-.3-21.1-5.1-27.5-12.6-.1.2-.2.4-.2.5-3.1.9-6 2.7-8.4 5.4l-.2.2s-.5.6-1.5 1.7c-.9 1.1-2.2 2.6-3.7 4.5-3.1 3.9-7.2 9.5-11.7 16.6-.9 1.4-1.7 2.8-2.6 4.3h109.6c-3.4-7.1-6.5-12.8-8.9-16.9-1.5-2.2-2.6-3.8-3.3-5z"/> <circle fill="#444" cx="76.3" cy="47.5" r="2"/> <circle fill="#444" cx="50.7" cy="47.6" r="2"/> <path fill="#444" d="M48.1 27.4c4.5 5.9 15.5 12.1 42.4 8.4-2.2-6.9-6.8-12.6-12.6-16.4C95.1 20.9 92 10 92 10c-1.4 5.5-11.1 4.4-11.1 4.4H62.1c-1.7-.1-3.4 0-5.2.3-12.8 1.8-22.6 11.1-25.7 22.9 10.6-1.9 15.3-7.6 16.9-10.2z"/> </svg>'}}),app.directive("media",function(){return{templateUrl:"scripts/templates/mediaTmpl.html"}}),app.directive("excercises",function(){return{
templateUrl:"scripts/templates/excerciseTmpl.html"}}),app.directive("workouts",function(){return{templateUrl:"scripts/templates/workoutTmpl.html"}}),app.directive("login",function(){return{templateUrl:"scripts/templates/loginTmpl.html"}}),app.directive("logout",function(){return{templateUrl:"scripts/templates/loginTmpl.html"}}),app.directive("signup",function(){return{templateUrl:"scripts/templates/signupTmpl.html"}}),app.directive("statistics",function(){return{templateUrl:"scripts/templates/statsTmpl.html"}}),app.directive("dashboard",function(){return{templateUrl:"scripts/templates/dashboardTmpl.html"}}),app.directive("startTab",function(){return{templateUrl:"scripts/templates/startTmpl.html"}}),app.directive("user",function(){return{templateUrl:"scripts/templates/userTmpl.html"}}),app.directive("bugs",function(){return{templateUrl:"scripts/templates/bugsTmpl.html"}}),app.directive("version",function(){return{templateUrl:"scripts/templates/versionTmpl.html"}}),app.directive("users",function(){return{templateUrl:"scripts/templates/usersTmpl.html"}}),app.directive("privacy",function(){return{templateUrl:"scripts/templates/privacyTmpl.html"}}),app.directive("imprint",function(){return{templateUrl:"scripts/templates/imprintTmpl.html"}}),app.directive("settings",function(){return{templateUrl:"scripts/templates/settingsTmpl.html"}}),app.directive("shishaTobacco",function(){return{templateUrl:"scripts/templates/shishaTobaccoTmpl.html"}}),app.directive("shishaCoal",function(){return{templateUrl:"scripts/templates/shishaCoalTmpl.html"}}),app.directive("errSrc",function(){return{link:function(a,b,c){b.bind("error",function(){c.src!=c.errSrc&&c.$set("src",c.errSrc)})}}}),app.config(["$mdThemingProvider",function(a){var b=0;for(var c in ThemeColors){var d=ThemeColors[c];for(var e in ThemeColors){var f=ThemeColors[e];d!=f&&(a.theme(d+f).primaryPalette(d).accentPalette(f),a.theme(d+f+"dark").primaryPalette(d).accentPalette(f).dark(),b+=2)}}a.setDefaultTheme("greygreen"),a.alwaysWatchTheme(!0)}]),app.config(["$mdIconProvider",function(a){a.iconSet("demo","/thirdParty/font/custom.svg",24).iconSet("material","/thirdParty/fonts/materialdesignicons-webfont.svg",24)}]),angular.module("application.templates",[]).run(["$templateCache",function(a){}]);
//# sourceMappingURL=app.min.js.map